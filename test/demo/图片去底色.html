<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <style>
    *{
      margin:0;
      padding:0;
    }
    html,body{
      overflow:hidden;
      background:black;
    }
    #con{
      background:white;
      margin-left:500px;
      margin-top:100px;
    }
  </style>
</head>
<body>
<button id="min">-----</button>
<button id="max">+++++</button>
<button id="change">能画了</button>
<canvas id="con" width="400" height="533"></canvas>
<script>
  const con = document.getElementById('con');
  const min = document.getElementById('min');
  const max = document.getElementById('max');
  const change = document.getElementById('change');
  let canClick = false;

  let row = 1;
  min.onclick = () => {
    row--;
  };
  max.onclick = () => {
    row++;
  };
  change.onclick = () => {
    canClick = !canClick;
  };
  const c = con.getContext('2d');
  const img = new Image();
  img.src = "./img/xiaoer.png";
  img.onload = () => {
    c.drawImage(img,0,0,img.width,img.height);

    draw(c,0,0,90,800,255,230,220);
    draw(c,0,0,100,800,205,200,220);

    con.onmousemove = (evt) => {
      if(canClick){
        let e = evt || window.event;
        let x = e.offsetX;
        let y = e.offsetY;
        c.save();
        c.beginPath();
        c.fillStyle = 'white';
        console.log(row);
        c.arc(x,y,row,0,Math.PI * 180);
        c.fill();
        c.restore();
      }
    }

  };


  function draw(c,x,y,w,h,r,g,b){
    let data = c.getImageData(x,y,w,h);
    let len = data.data.length;
    for(let i = 0;i < len;i += 4){
      if(data.data[i] < r && data.data[i + 1] < g && data.data[i + 2] < b){
        data.data[i] = 255;
        data.data[i + 1] = 255;
        data.data[i + 2] = 255;
        data.data[i + 3] = 1;
      }
    }
    c.putImageData(data,0,0);
  }
</script>
</body>
</html>
